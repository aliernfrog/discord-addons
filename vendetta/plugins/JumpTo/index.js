(function(T,m,d,g,h,U,_,A){"use strict";function k(e,a,u){return`https://discord.com/channels/${e??"@me"}/${a}/${u}`}function B(e){return k(e.guild_id,e.id,e.id)}var I;const{hideActionSheet:w}=m.findByProps("openLazy","hideActionSheet"),y=(I=m.findByProps("ActionSheetRow"))===null||I===void 0?void 0:I.ActionSheetRow,D=m.findByName("ForumPostLongPressActionSheet",!1),C=h.getAssetIDByName("ic_copy_message_link"),F=h.getAssetIDByName("toast_copy_link"),{FormIcon:M,FormRow:G}=U.Forms;var J=y?function(){return g.after("default",D,function(e,a){let[{thread:u}]=e;const n=A.findInReactTree(a,function(i){var r,t;return(i==null||(t=i[0])===null||t===void 0||(r=t.type)===null||r===void 0?void 0:r.name)==="ActionSheetRowGroup"});if(!n)return;const o=B(u);n.unshift(React.createElement(y.Group,{key:"jumptovd"},React.createElement(y,{label:"Jump To Starter Message",icon:React.createElement(y.Icon,{source:C}),onPress:function(){d.url.openDeeplink(o)},onLongPress:function(){d.clipboard.setString(o),_.showToast("Copied starter message URL",F),w()}})))})}():function(){return g.after("default",D,function(e,a){let[{thread:u}]=e;var n,o,i,r,t;const l=(t=A.findInReactTree(a,function(v){var c;return v==null||(c=v.props)===null||c===void 0?void 0:c.bottom}))===null||t===void 0||(r=t.props)===null||r===void 0||(i=r.children)===null||i===void 0||(o=i.props)===null||o===void 0||(n=o.children)===null||n===void 0?void 0:n[1];if(!l)return;const p=B(u),R=l[0].type;l.unshift(React.createElement(R,{key:"jumptovd"},React.createElement(G,{label:"Jump To Starter Message",leading:React.createElement(M,{source:C,style:{opacity:1}}),onPress:function(){d.url.openDeeplink(p)},onLongPress:function(){d.clipboard.setString(p),_.showToast("Copied starter message URL",F),w()}})))})}();const{TouchableOpacity:j}=U.General,$=m.findByProps("openLazy","hideActionSheet"),N=h.getAssetIDByName("ic_copy_message_link"),O=h.getAssetIDByName("toast_copy_link");var q=g.before("openLazy",$,function(e){let[a,u,n]=e;u=="MessageLongPressActionSheet"&&a.then(function(o){const i=g.after("default",o,function(r,t){var l;React.useEffect(function(){return function(){i()}},[]);let p,R;const v=A.findInReactTree(t,function(f){var L,P;const E=(f==null||(L=f.find)===null||L===void 0?void 0:L.call(f,function(S){var s;return((s=S.props)===null||s===void 0?void 0:s.iconSource)===N}))??(f==null||(P=f.find)===null||P===void 0?void 0:P.call(f,function(S){var s,b;return((s=S.type)===null||s===void 0?void 0:s.name)==="ButtonRow"&&((b=S.props)===null||b===void 0?void 0:b.IconComponent)}));return E?(p=E.type,R=E.props.IconComponent,!0):!1}),c=n==null||(l=n.message)===null||l===void 0?void 0:l.messageReference;if(!c?.message_id||!v)return;const z=k(c.guild_id,c.channel_id,c.message_id);v.push(React.createElement(j,{onLongPress:function(){d.clipboard.setString(z),_.showToast("Copied referenced message URL",O),$.hideActionSheet()},onPress:function(){d.url.openDeeplink(z)}},React.createElement(p,{message:"Jump To Reference",iconSource:N,IconComponent:R})))})})});const H=[J,q],K=function(){return H.forEach(function(e){return e?.()})};return T.onUnload=K,T})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.ui.components,vendetta.ui.toasts,vendetta.utils);
